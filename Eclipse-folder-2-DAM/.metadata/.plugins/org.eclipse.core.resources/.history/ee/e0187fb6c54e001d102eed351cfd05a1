package tiendaApple;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.StringTokenizer;

import productosApple.Accesorio;
import productosApple.AirPods;
import productosApple.IWatch;
import productosApple.Iphone;
import productosApple.Mac;
import productosApple.iPad;

public class Main {

    public static void main(String[] args) throws FileNotFoundException {

        // Se crean 6 ArrayList para guardar los productos de cada tipo
        ArrayList <Accesorio> ALAccesorio = new ArrayList <Accesorio>();
        ArrayList <AirPods> ALAirPods = new ArrayList <AirPods>();
        ArrayList <IWatch> ALIWatch = new ArrayList <IWatch>();
        ArrayList <Iphone> ALIphone = new ArrayList <Iphone>();
        ArrayList <Mac> ALMac = new ArrayList <Mac>();
        ArrayList <iPad> ALiPad = new ArrayList <iPad>();
        
        // Los datos se cargar√°n desde 6 archivos .txt, uno por tipo de producto

        // Se pregunta al usuario la carpeta en la que se encuentra los archivos
        // con los nombre de [tipo].txt
        System.out.println("Introduce la ruta de la carpeta donde se encuentran los archivos .txt");
        Scanner sc = new Scanner(System.in);
        String ruta = sc.nextLine();
        sc.close();        
        
        // Se guardan la ubicaciones de los archivos en un File por archivo
        File Accesorio = new File(ruta + "\\Accesorio.txt");
        File AirPods = new File(ruta + "\\AirPods.txt");
        File IWatch = new File(ruta + "\\IWatch.txt");
        File Iphone = new File(ruta + "\\Iphone.txt");
        File Mac = new File(ruta + "\\Mac.txt");
        File iPad = new File(ruta + "\\iPad.txt");

        // Se crea un Scanner para separar los datos de cada producto
        Scanner scAccesorio = new Scanner(new FileReader(Accesorio));
        Scanner scAirPods = new Scanner(new FileReader(AirPods));
        Scanner scIWatch = new Scanner(new FileReader(IWatch));
        Scanner scIphone = new Scanner(new FileReader(Iphone));
        Scanner scMac = new Scanner(new FileReader(Mac));
        Scanner sciPad = new Scanner(new FileReader(iPad));

        // Se crea un while para leer los archivos con el Scanner y crear los productos
        // y se guardan en el Arraylist correspondiente
        // El formateo de los ficheros es el siguiente:
        // # comentarios
        // id-otro dato
        // compatibilidad: id1,id2,id3
        
        // Accesorio
        // id-nombre-precio-stock-compatibilidad
        while (scAccesorio.hasNextLine()) {
            String linea = scAccesorio.nextLine();
            if (linea.charAt(0) != '#') {
                StringTokenizer st = new StringTokenizer(linea, "-");
                int id = Integer.parseInt(st.nextToken());
                String nombre = st.nextToken();
                double precio = Double.parseDouble(st.nextToken());
                int stock = Integer.parseInt(st.nextToken());
                ArrayList <Integer> compatibilidad = new ArrayList <Integer>();
                StringTokenizer st2 = new StringTokenizer(st.nextToken(), ",");
                while (st2.hasMoreTokens()) {
                    compatibilidad.add(Integer.parseInt(st2.nextToken()));
                }
                Accesorio accesorio = new Accesorio(id, nombre, precio, stock, compatibilidad);
                ALAccesorio.add(accesorio);
            }
        }

        scAccesorio.close();

        System.out.println(ALAccesorio);

        // AirPods
        // id-nombre-precio-stock-color-compatibilidad

        while (scAirPods.hasNextLine()) {
            String linea = scAirPods.nextLine();
            if (linea.charAt(0) != '#') {
                StringTokenizer st = new StringTokenizer(linea, "-");
                int id = Integer.parseInt(st.nextToken());
                String nombre = st.nextToken();
                double precio = Double.parseDouble(st.nextToken());
                int stock = Integer.parseInt(st.nextToken());
                String color = st.nextToken();
                ArrayList <Integer> compatibilidad = new ArrayList <Integer>();
                StringTokenizer st2 = new StringTokenizer(st.nextToken(), ",");
                while (st2.hasMoreTokens()) {
                    compatibilidad.add(Integer.parseInt(st2.nextToken()));
                }
                AirPods airpods = new AirPods(id, nombre, precio, stock, color, compatibilidad);
                ALAirPods.add(airpods);
            }
        }

        scAirPods.close();

        System.out.println(ALAirPods);

        // IWatch
        // id-nombre-precio-stock-color-compatibilidad

        while (scIWatch.hasNextLine()) {
            String linea = scIWatch.nextLine();
            if (linea.charAt(0) != '#') {
                StringTokenizer st = new StringTokenizer(linea, "-");
                int id = Integer.parseInt(st.nextToken());
                String nombre = st.nextToken();
                double precio = Double.parseDouble(st.nextToken());
                int stock = Integer.parseInt(st.nextToken());
                String color = st.nextToken();
                ArrayList <Integer> compatibilidad = new ArrayList <Integer>();
                StringTokenizer st2 = new StringTokenizer(st.nextToken(), ",");
                while (st2.hasMoreTokens()) {
                    compatibilidad.add(Integer.parseInt(st2.nextToken()));
                }
                IWatch iwatch = new IWatch(id, nombre, precio, stock, color, compatibilidad);
                ALIWatch.add(iwatch);
            }
        }

        scIWatch.close();

        System.out.println(ALIWatch);
        
        
        
        

    }



}
